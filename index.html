try:from fake_useragent import UserAgent;from bs4 import BeautifulSoup;import requests
except:import os;os.system('pip install requests');os.system('pip install bs4');os.system('pip install fake_useragent')
from fake_useragent import UserAgent
from datetime import datetime
from random import randint
from time import sleep
import requests,os,sys
s=0
ua=UserAgent()
user_agent=ua.chrome
##COPYRIGHT###TOM-SOOL##
black='\033[1;90m'
white='\033[1;97m'
red='\033[1;91m'
blue='\033[1;96m'
blue='\033[1;96m'
yellow='\033[1;93m'
whitex='\033[7;37m\033[1;37m'
pink='\033[1;96m'
redb='\033[7;37m\033[1;91m'
redz='\033[1;41;97m'
bold='\033[7;37m'
end='\033[0m'
icon='\033[1;97m[\033[1;91m+\033[1;97m] \033[1;97m=>\033[1;92m '
#USER_AGENT
ua=UserAgent()
user_agent=ua.chrome
browser_name=user_agent.split('/')[0]
browser_ver=user_agent.strip(browser_name)
browser_version=browser_ver[1:len(browser_ver)]
#LOGO
logo = f"""
{white}    _/_/_/              _/  _/                      
{blue}   _/    _/    _/_/_/  _/      _/_/_/      _/_/_/   
{yellow}  _/    _/  _/    _/  _/  _/  _/    _/  _/    _/    
{pink} _/    _/  _/    _/  _/  _/  _/    _/  _/    _/     
{pink}_/_/_/      _/_/_/  _/  _/  _/    _/    _/_/_/      
{yellow}                                          _/       
{white}                                      _/_/       
{white}================================================
{red}>> {blue}ZALO: {yellow}0372760208 {red}<<
{red}>> {blue}TOOL NAME: {yellow}AUTO COMMENT TIKTOK TDS {red}<<
{red}>> {blue}LICENSE: {yellow}DarlingMquang {red}<<
{red}>> {yellow}NO STORAGE AND RESELLER OF ANY KIND {red}<<
{red}>> {yellow}THANKS FOR USE {red}<<
"""

#DELAY
def fivex_delay(o):
    while(o>1):
        o=o-1
        print(f'\033[1;32mDarlingMquang \033[1;31m[\033[1;33m{o}\033[1;31m]','     ',end='\r');sleep(1/5)
        print(f'\033[1;32mDarlingMquang \033[1;31m[\033[1;33m{o}\033[1;31m]','     ',end='\r');sleep(1/5)
        print(f'\033[1;32mDarlingMquang \033[1;31m[\033[1;33m{o}\033[1;31m]','     ',end='\r');sleep(1/5)
        print(f'\033[1;32mDarlingMquang \033[1;31m[\033[1;33m{o}\033[1;31m]','     ',end='\r');sleep(1/5)
        print(f'\033[1;32mDarlingMquang \033[1;31m[\033[1;33m{o}\033[1;31m]','     ',end='\r');sleep(1/5)
        print(f'\033[1;32mDarlingMquang \033[1;31m[\033[1;33m{o}\033[1;31m]','     ',end='\r');sleep(1/5)
#COMMENT
def comment(aweme_id, text, cookie_tiktok):

    #USER_AGENT
    ua=UserAgent()
    user_agent=ua.chrome
    browser_name=user_agent.split('/')[0]
    browser_ver=user_agent.strip(browser_name)
    browser_version=browser_ver[1:len(browser_ver)]
    #SCREEN
    screen_height=randint(720, 1080)
    screen_width=randint(360, 720)
    #DEVICE
    device_id=randint(7000000000000000000, 8000000000000000000)
    #TOKEN
    tt_csrf_token=cookie_tiktok.split('tt_csrf_token=')[1].split(';')[0]
    x_secsdk_csrf_token = requests.head('https://www.tiktok.com/api/comment/publish/', headers={'authority': 'www.tiktok.com','accept': '*/*','accept-language': 'vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5','cookie': cookie_tiktok,'referer': 'https://www.tiktok.com/','sec-fetch-dest': 'empty','sec-fetch-mode': 'cors','sec-fetch-site': 'same-origin','user-agent': user_agent,'x-secsdk-csrf-request': '1','x-secsdk-csrf-version': '1.2.7'}).headers['x-ware-csrf-token'].split(',')[1]
    #COMMENT
    comment = requests.post(f'https://www.tiktok.com/api/comment/publish/?aid=1988&app_language=vi-VN&app_name=tiktok_web&aweme_id={aweme_id}&battery_info=1&browser_language=vi-VN&browser_name={browser_name}&browser_online=true&browser_version={browser_version}&channel=tiktok_web&cookie_enabled=true&device_id={device_id}&focus_state=true&from_page=video&history_len=5&is_fullscreen=true&is_page_visible=true&priority_region=VN&referer=https://www.tiktok.com/&region=VN&screen_height={screen_height}&screen_width={screen_width}&text={text}&text_extra=[]', headers={'authority': 'www.tiktok.com','accept': '*/*','accept-language': 'vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5','content-type': 'application/x-www-form-urlencoded','cookie': cookie_tiktok,'origin': 'https://www.tiktok.com','referer': 'https://www.tiktok.com/','sec-fetch-dest': 'empty','sec-fetch-mode': 'cors','sec-fetch-site': 'same-origin','tt-csrf-token': tt_csrf_token,'user-agent': user_agent,'x-secsdk-csrf-token': x_secsdk_csrf_token})
    try:
        status=0
        status_msg=comment.json()['status_msg'].upper()
        print(f'\033[1;32m{status_msg} \033[1;37m| \033[1;31m{text}')
        return status
    except:
        status=1
        print(icon+f'\033[1;31mCOMMENT FAILURE')
        return status
#TOKEN_TDS
os.system('cls')
print(logo)
while(True):
    while(True):
        token_tds=input(icon+f'NHẬP ACCESS_TOKEN TDS: ')
        login=requests.get(f'https://traodoisub.com/api/?fields=profile&access_token={token_tds}').json()
        if 'error' in str(login):
            error=login['error'].upper()
            print(error)
        if 'success' in str(login):
            #print(logo)
            user=login['data']['user'].upper()
            xu=login['data']['xu']
            xu_die=login['data']['xudie']
            print(icon+f'\033[1;32mTÊN TRAODOISUB: \033[1;33m{user}\033[1;32m XU: {xu}')
            sleep(1);break
    break
#COOKIE_TIKTOK
os.system('cls')
print(logo)
cookies=1
while(True):
    try:
        print(icon+f'\033[1;37mVUI LÒNG COMMENT 1 VIDEO BẤT KÌ TRƯỚC KHI LẤY COOKIE TIKTOK')
        cookie_tiktok=input(icon+f'\033[1;32mNHẬP COOKIE TIK_TOK: \033[1;35m')
        #LOGIN
        response = requests.get(f'https://www.tiktok.com/passport/web/account/info/', headers={'authority': 'www.tiktok.com','accept': '*/*','accept-language': 'vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5','cookie': cookie_tiktok,'referer': 'https://www.tiktok.com/','sec-fetch-dest': 'empty','sec-fetch-mode': 'cors','sec-fetch-site': 'same-origin','user-agent': user_agent}).json()['data']
        #ID
        user_id=response['user_id']
        #RUN
        run=requests.get(f'https://traodoisub.com/api/?fields=tiktok_run&id={user_id}&access_token={token_tds}').json()
        if 'success' in run:
            cookies=cookies+1
            id=run['data']['id']
            msg=run['data']['msg'].upper()
            uniqueID=run['data']['uniqueID'].upper()
            print(f'\33[1;32m[\033[1;33m{uniqueID}\033[1;32m] \033[1;37m[\033[1;32m{id}\033[1;37m] \033[1;31m[\033[1;33m{msg}\033[1;31m]');sleep(1);break
        elif 'error' in run:
            error=run['error'].upper()
            print(f'{error}')
        else:print(f'?')
    except:print(icon+f'COOKIE SAI?')
os.system('cls')
print(logo)
print(icon+f'\033[1;32mNHIỆM VỤ COMMENT')
#DELAY
min=15
max=20
#STOP
while(True):
    try:stop=int(input(icon+f'NHẬP SỐ NHIỆM VỤ MUỐN LÀM: \033[1;33m'));break
    except:print(f'?')
#FIVEX
os.system('cls')
print(logo)
#MAIN
s=0
#LOGIN
response = requests.get(f'https://www.tiktok.com/passport/web/account/info/', headers={'authority': 'www.tiktok.com','accept': '*/*','accept-language': 'vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5','cookie': cookie_tiktok,'referer': 'https://www.tiktok.com/','sec-fetch-dest': 'empty','sec-fetch-mode': 'cors','sec-fetch-site': 'same-origin','user-agent': user_agent}).json()['data']
#ID
user_id=response['user_id']
#RUN
run=requests.get(f'https://traodoisub.com/api/?fields=tiktok_run&id={user_id}&access_token={token_tds}').json()
if 'success' in run:
    cookies=cookies+1
    id=run['data']['id']
    msg=run['data']['msg'].upper()
    uniqueID=run['data']['uniqueID'].upper()
    print(f'\33[1;32m[\033[1;33m{uniqueID}\033[1;32m] \033[1;37m[\033[1;32m{id}\033[1;37m] \033[1;31m[\033[1;33m{msg}\033[1;31m]');sleep(1)
elif 'error' in run:
    error=run['error'].upper()
    print(f'{error}');sleep(5);exit()
else:print(f'?');sleep(5);exit()
os.system('cls')
print(logo)
print(f'\33[1;32m[NICK TIK_TOK: \033[1;33m{uniqueID}\033[1;32m] \033[1;37m[\033[1;32m{id}\033[1;37m] \033[1;31m[\033[1;33m{msg}\033[1;31m]')
print('\033[1;37m= = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =')
while(True):
    while(True):
        try:
            get_nv=requests.get(f'https://traodoisub.com/api/?fields=tiktok_comment&access_token={token_tds}').json()
            if 'id' in str(get_nv):break
            if 'countdown' in get_nv:fivex_delay(int(get_nv['countdown']))
        except:print(icon+f'\033[1;31mERROR....','               ',end='\r')
    for nv in get_nv:
        try:
            s=s+1
            status=0
            id=nv['id']
            aweme_id=id.split('_')[0]
            link=nv['link']
            type=nv['type'].upper()
            text=nv['noidung']
            time=datetime.now().strftime("%H:%M:%S")
            done=f'\033[1;31m[\033[1;33m{s}\033[1;31m] \033[1;37m{time} \033[1;32m{type} ID \033[1;31m[\033[1;37m{aweme_id}\033[1;31m]\n'
            for v in done:sys.stdout.write(v);sys.stdout.flush();sleep(0.0005)
            comment(aweme_id, text, cookie_tiktok)
            sleep(1)
            fivex_delay(randint(min, max))
            cham='X'*len(str(s))
            get_xu=requests.get(f'https://traodoisub.com/api/coin/?type=TIKTOK_COMMENT&id={id}&access_token={token_tds}').json()
            if 'success' in get_xu:
                xu=get_xu['data']['xu']
                msg=get_xu['data']['msg'].upper()
                print(f'\033[1;31m[\033[1;33mDarling\033[1;31m] \033[1;37m{time} \033[1;33m{msg} \033[1;31m[\033[1;32m{xu}\033[1;31m]')
            if 'error' in get_xu:
                msg=get_xu['error'].upper()
                print(f'\033[1;31m[\033[1;33mDarlingMquang\033[1;31m] \033[1;37m{time} \033[1;33m{msg} \033[1;31m[\033[1;32m{xu}\033[1;31m]')
            if s==stop:break
        except:print(icon+f'\033[1;31mERROR....','               ',end='\r')
    if s==stop:print(icon+f'\033[1;32mSUCCESS....');break
